(function(){"use strict";var e={2416:function(e,t,n){var o=n(5130),s=n(6768);function r(e,t){const n=(0,s.g2)("router-link"),o=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("nav",null,[(0,s.bF)(n,{to:"/"},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)("Codici",-1)])]),_:1}),t[2]||(t[2]=(0,s.eW)(" | ",-1)),(0,s.bF)(n,{to:"/nuovoUtente"},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)("Nuovo Utente",-1)])]),_:1})]),(0,s.bF)(o)],64)}var a=n(1241);const i={},u=(0,a.A)(i,[["render",r]]);var c=u,l=n(1387);const d={key:0,class:"user-list"},p={key:1};function m(e,t,n,r,a,i){const u=(0,s.g2)("UserCard");return(0,s.uX)(),(0,s.CE)("div",null,[t[2]||(t[2]=(0,s.Lk)("h1",null,"Elenco Utenti",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchTerm=e),type:"text",placeholder:"Cerca per nome o cognome",class:"form-control mb-3"},null,512),[[o.Jo,a.searchTerm]]),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.loadCodes&&i.loadCodes(...e)),class:"btn btn-primary mb-3"},"Carica utenti"),i.filteredUtenti.length?((0,s.uX)(),(0,s.CE)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.filteredUtenti,(e,t)=>((0,s.uX)(),(0,s.Wv)(u,{key:t,utente:e,index:t},null,8,["utente","index"]))),128))])):((0,s.uX)(),(0,s.CE)("p",p,"Nessun utente trovato."))])}n(8111),n(2489);var f=n(782),v=n(4232);const b={key:0,class:"banner"},h={class:"buttons"},g=["disabled"];function _(e,t,n,o,r,a){const i=(0,s.g2)("qrcode-vue");return(0,s.uX)(),(0,s.CE)("div",{class:(0,v.C4)(["utente-card",{"max-spese":r.spese_fatte>=10}])},[(0,s.Lk)("p",null,[t[3]||(t[3]=(0,s.Lk)("strong",null,"Nome:",-1)),(0,s.eW)(" "+(0,v.v_)(n.utente.nome),1)]),(0,s.Lk)("p",null,[t[4]||(t[4]=(0,s.Lk)("strong",null,"Cognome:",-1)),(0,s.eW)(" "+(0,v.v_)(n.utente.cognome),1)]),(0,s.Lk)("p",null,[t[5]||(t[5]=(0,s.Lk)("strong",null,"Data di nascita:",-1)),(0,s.eW)(" "+(0,v.v_)(a.formatDate(n.utente.data_nascita)),1)]),(0,s.Lk)("p",null,[t[6]||(t[6]=(0,s.Lk)("strong",null,"QR Code:",-1)),(0,s.eW)(" "+(0,v.v_)(n.utente.qr_code),1)]),r.spese_fatte>=10?((0,s.uX)(),(0,s.CE)("div",b," 10 spese raggiunte! ")):(0,s.Q3)("",!0),(0,s.bF)(i,{value:n.utente.qr_code,size:100,level:"M",style:{margin:"10px 0"}},null,8,["value"]),(0,s.Lk)("p",null,[t[7]||(t[7]=(0,s.Lk)("strong",null,"Spese fatte:",-1)),(0,s.Lk)("span",null,(0,v.v_)(r.spese_fatte),1)]),(0,s.Lk)("div",h,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.incrementSpese&&a.incrementSpese(...e)),class:"btn btn-sm btn-secondary",disabled:r.spese_fatte>=10}," +1 ",8,g),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.saveSpese&&a.saveSpese(...e)),class:"btn btn-sm btn-primary"},"Salva"),r.spese_fatte>=10?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>a.resetSpese&&a.resetSpese(...e)),class:"btn btn-sm btn-warning"}," Reset ")):(0,s.Q3)("",!0)])],2)}var k=n(9877),y={name:"UserCard",components:{QrcodeVue:k.Ay},props:{utente:{type:Object,required:!0},index:{type:Number,required:!0}},data(){return{spese_fatte:this.utente.spese_fatte?Number(this.utente.spese_fatte):0}},methods:{incrementSpese(){this.spese_fatte<10&&(this.spese_fatte+=1)},async saveSpese(){await this.$store.dispatch("updateUser",{qr_code:this.utente.qr_code,updatedFields:{spese_fatte:this.spese_fatte},index:this.index}),alert("Spese aggiornate correttamente!")},async resetSpese(){this.spese_fatte=0,await this.saveSpese()},formatDate(e){if(!e)return"-";const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),o=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getFullYear());return`${n}/${o}/${s}`}}};const x=(0,a.A)(y,[["render",_],["__scopeId","data-v-4e537e24"]]);var C=x,L={name:"ElencoUtenti",components:{UserCard:C},data(){return{searchTerm:""}},computed:{...(0,f.L8)(["arrayCodes"]),utenti(){return this.arrayCodes},filteredUtenti(){const e=this.searchTerm.toLowerCase();return this.utenti.filter(t=>t.nome.toLowerCase().includes(e)||t.cognome.toLowerCase().includes(e))}},methods:{...(0,f.i0)(["codesdb"]),loadCodes(){this.codesdb()}},created(){this.loadCodes()}};const S=(0,a.A)(L,[["render",m],["__scopeId","data-v-132d49b0"]]);var U=S;const w={class:"py-5"},E={class:"container mt-5"},A={class:"row"},D={class:"col-md-7"},O={class:"col-md-6"},q={class:"col-md-6"},T={class:"col-md-6"};function R(e,t,n,r,a,i){return(0,s.uX)(),(0,s.CE)("main",w,[(0,s.Lk)("div",E,[t[8]||(t[8]=(0,s.Lk)("h1",null,"Aggiungi un nuovo utente",-1)),t[9]||(t[9]=(0,s.Lk)("h4",{class:"mt-3"}," Inserisci i dati dell'utente e verrÃ  generato un QR code automaticamente ",-1)),(0,s.Lk)("div",A,[(0,s.Lk)("div",D,[(0,s.Lk)("form",{class:"row g-4",onSubmit:t[3]||(t[3]=(0,o.D$)((...e)=>i.submitUser&&i.submitUser(...e),["prevent"]))},[(0,s.Lk)("div",O,[t[4]||(t[4]=(0,s.Lk)("label",{class:"form-label",for:"nome"},"Nome",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.user.nome=e),class:"form-control",id:"nome",required:""},null,512),[[o.Jo,a.user.nome]])]),(0,s.Lk)("div",q,[t[5]||(t[5]=(0,s.Lk)("label",{class:"form-label",for:"cognome"},"Cognome",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.user.cognome=e),class:"form-control",id:"cognome",required:""},null,512),[[o.Jo,a.user.cognome]])]),(0,s.Lk)("div",T,[t[6]||(t[6]=(0,s.Lk)("label",{class:"form-label",for:"data_nascita"},"Data di nascita",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.user.data_nascita=e),type:"date",class:"form-control",id:"data_nascita",required:""},null,512),[[o.Jo,a.user.data_nascita]])]),t[7]||(t[7]=(0,s.Lk)("div",{class:"col-12 text-end"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary"},"Aggiungi")],-1))],32)])])])])}var F={data(){return{user:{nome:"",cognome:"",data_nascita:"",qr_code:"",spese_fatte:0},lastAdded:{}}},methods:{formatDate(e){if(!e)return"-";const t=new Date(e);return t.toLocaleDateString("it-IT")},generateQR(){return"xxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})},async submitUser(){const e={...this.user,qr_code:this.generateQR()};await this.$store.dispatch("addUser",e),this.lastAdded=e,this.showAlert=!0,this.user={nome:"",cognome:"",data_nascita:"",qr_code:"",spese_fatte:0}}}};const X=(0,a.A)(F,[["render",R],["__scopeId","data-v-9fe656bc"]]);var j=X;const I=[{path:"/",name:"codici",component:U},{path:"/nuovoUtente",name:"nuovoUtente",component:j}],M=(0,l.aE)({history:(0,l.LA)("/"),routes:I});var P=M,W=(n(4114),n(4373)),$=(0,f.y$)({state:{arrayCodes:[]},getters:{arrayCodes:e=>e.arrayCodes},mutations:{IMPORT_CODES(e,t){e.arrayCodes=t},ADD_USER(e,t){e.arrayCodes.push(t)},UPDATE_USER(e,{index:t,user:n}){e.arrayCodes.splice(t,1,n)}},actions:{async codesdb({commit:e}){const t=await W.A.get("http://localhost:4000/users");e("IMPORT_CODES",t.data)},async addUser({commit:e},t){const n=await W.A.post("http://localhost:4000/users",t);e("ADD_USER",n.data)},async updateUser({commit:e},{qr_code:t,updatedFields:n,index:o}){const s=await W.A.put(`http://localhost:4000/users/${t}`,n);e("UPDATE_USER",{index:o,user:s.data})}}});n(323);const Q=(0,o.Ef)(c);$.dispatch("codesdb").then(()=>{Q.use($).use(P).mount("#app")})}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,r){if(!o){var a=1/0;for(l=0;l<e.length;l++){o=e[l][0],s=e[l][1],r=e[l][2];for(var i=!0,u=0;u<o.length;u++)(!1&r||a>=r)&&Object.keys(n.O).every(function(e){return n.O[e](o[u])})?o.splice(u--,1):(i=!1,r<a&&(a=r));if(i){e.splice(l--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,s,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,r,a=o[0],i=o[1],u=o[2],c=0;if(a.some(function(t){return 0!==e[t]})){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(u)var l=u(n)}for(t&&t(o);c<a.length;c++)r=a[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},o=self["webpackChunkqrcode"]=self["webpackChunkqrcode"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],function(){return n(2416)});o=n.O(o)})();
//# sourceMappingURL=app.bb072613.js.map